'use strict';
// sequelizeをモジュールとして読み込み、
// DBの設定を渡して秘密の匿名掲示板を表すデータベースオブジェクトを作成する
// sequelizeが出力するログの設定をオフにする
const Sequelize = require('sequelize');
const sequelize = new Sequelize(
    'postgres:postgres:postgres@localhost/secret_board',
    {
        logging: false
    }
);

// データモデルの定義
const Post = sequelize.define(
    'Post',
    {
        id: {
            type: Sequelize.INTEGER,
            autoIncrement: true,
            primaryKey: true
        },
        // Sequelize.TEXT型は文字数の制限がない型
        content: {
            type: Sequelize.TEXT
        },
        // Sequelize.STRING型は255文字という文字数の上限がある型
        postedBy: {
            type: Sequelize.STRING
        },
        trackingCookie: {
            type: Sequelize.STRING
        }
    },
    // テーブル名をPostという名前に固定し、作成日時と更新日時を自動的に追加する設定
    {
        freezeTableName: true,
        timestamps: true
    }
);

// Postオブジェクト自体をデータベースに適用し、同期を取る
Post.sync();
module.exports = Post;
